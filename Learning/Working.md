# Yolo项目-垒石石墨卷

## 前置内容
pycharm，anoconda，git  

### nvidia环境配置  

nvidia-smi (查看GPU)(linux)  
```
@echo off
:loop
cls
nvidia-smi
timeout /t 1 >nul
goto loop
```
^←windows，bat文件内容  

### 实施步骤  
1. 数据集分割  
2. git下载yolov12，安装torch以及依赖包  

## 你的训练日志位置：  
主要日志目录：**runs/detect/train12/**  
训练结果：**runs/detect/train12/results.csv** - 包含每个epoch的详细指标  
模型权重：**runs/detect/train12/weights/** - 包含 best.pt 和 last.pt  
训练参数：**runs/detect/train12/args.yaml** - 记录所有训练配置  
查看 **runs/detect/train12/weights/best.pt** 获取当前最佳模型。    
在**ultralytics/cfg**里找要训练的模型的对应的网络yaml。  



## 部署的前置要求  
1. pt转ort转trt(他们的关系，含义，转换方法)  
2. 安CUDA  **C:\Users\Administrator\AppData\Local\Temp\cuda**   
3. 安cudnn 
4. 使用训练脚本训练模型，拿官方的直接转ort，使用trtexec来ort转换trt  
5. 使用trtexec需要TensorRT，到官网安装  
6. 编onnxruntime库，用c++   
7. 需要知道模型部署时，模型的训练方式是seg还是det    
8. visual studio需要修改VC++目录和链接器中的输入    

##  试运行总结
1. 在visual studio里配置库的链接  

```
包含放包含，库放库（路径）

在链接器里放对应的lib
opencv_world460.lib
onnxruntime.lib
```

2. cuda和cudnn的版本要匹配，如果出现内存错误的问题，看控制台，大概率是版本没有匹配，少部分是资源声明（释放）顺序除了问题。  

3. 编写代码要用**PImpl**设计模式。  

## 打包DLL
1. 添加宏，添加include，添加lib，添加链接器中输入的附加依赖项。  

#ifdef YOLOV11SEG_EXPORTS  
#define YOLO_API __declspec(dllexport)  
#else  
#define YOLO_API __declspec(dllexport)  

在类前加class YOLO_API YOLOV11Seg{}  

生成即可。  

在使用目前已有的feature工程时，要注意更改include路径，lib路径和生成路径。  

2. 在使用dll的时候，要添加链接器，包括  
常规：添加库目录（lib path）  
输入：附加依赖项（.lib）   
也就是说，lib是一个函数内容的索引，dll是一个包含函数内容的文件。  
lib可以放在别处，用添加库目录和依赖项的方式找到它，而dll最好是放在exe同路径下。    

# 训练曲线说明  

## 看两张图  
### F1-Confidence  
置信控制过杀，漏检。    
置信降低，过杀控制不住。  
置信升高，漏检控制不住。  

### Instance  
看缺陷的分布情况，数据平衡。   

# BOHR DFM设计文档  

## 划分模型秘籍  
主要看检测区域设计部分，在那里有主要的检测内容，包括以下内容：  
- 光源信息  
- 拍照点  
- 拍照图片数量  
- 产品移动数量  
- 拍照+存储耗时  
- Station condition的详细说明  

使用多个station的信息，来判断模型合并的可能性。  
一看光源，光源一样，那么成像就有一致的可能性。  
二看检测类型，缺陷类型一样，且光源一样，那么就有缺陷成像一致的可能性；如果光源不一样而缺陷类型一样，成像一致性不能保证，一定不能合并。    
三看图片尺寸（很有说法），图片尺寸接近有合并的可能性。   
**总的来说是看缺陷成像特征一致性**。  

使用DFM的标定最小NG尺寸来计算图片中的缺陷区域大小，使用每个图片的单像素精度计算缺陷像素块个数，使用缺陷像素块计算缩放后像素块个数，缩放后像素块不能低于9个。   

划分模型更像是一个工程定量的过程，是接下来的模型训练的总体方针，为待处理数据划定不同的处理方式，细化处理过程，落定到每个资源上。所以划分讲究合理性，资源承接性，任务量充实性，训练可行性。  

# 模型检出结果分析及措施秘籍  

## 一个好模型必须注意的三点  

1. 数据质量。  
2. 缺陷明确定义。  
3. 缺陷数量分布均衡。   

## 处理过杀漏检的部分情况及方法  

### 缺失部件情况  
可以使用特征连接来检测缺失区域，后使用分类模型来判定是否有缺失。    
两个模型串行运行。  
1. 标注部位 → 检测模型输出位置；  
2. 裁剪ROI → 分类模型判断缺料与否；  
3. 推理时串行运行两个模型，得到最终缺料检测结果。  

### 特征重叠误检情况  
将误检部位打上标注，进入模型训练，并不检测这一缺陷。  
显示负样本建模，backbone学到两者的特增差异，分类头head就能区分它们。  
让模型主动学会它长什么样。   

### 特征丢失时为缺陷情况  
将有特征时（即ok品）打上标注，未检测到即为出现缺陷。  
核心是把“存在的特征”作为正样本去检测/分割/定位，需要把模型调成“少漏报”为首要目标。  

| 检测逻辑        | 核心思路                | 典型应用        |
| ----------- | ------------------- | ----------- |
| **缺陷直接检测**  | 直接标注缺陷区域，用检测/分割模型识别 | 划痕、裂纹、缺料、异物 |
| **特征存在检测**  | 标注应存在的特征，缺失即缺陷      | 螺丝、焊点、孔位检测  |
| **负样本抑制检测** | 显式标注易误检区域为另一类，推理时忽略 | 金属反光、油污斑点误检 |
| **二阶段检测**   | 阶段1找候选 → 阶段2分类确认    | 缺料、轻微划伤     |
| **模板对比**    | 与标准模板做对齐/差分         | PCB线路、印刷缺陷  |
| **区域屏蔽**    | 检测前直接屏蔽无关区域         | 背景杂乱场景      |
| **轮廓/尺寸测量** | 基于边缘/拟合测尺寸          | 工件变形、尺寸偏差   |
| **光学对比检测**  | 用多光源拍摄，检测反射/吸收差异    | 刻字检测、反光涂层缺陷 |
| **规则阈值检测**  | 灰度、颜色、纹理特征阈值判断      | 简单表面污染      |  

## 最终要达到的    
**看到一个缺陷就要知道它的处理方式**。   

总结在一个漏检、过杀的数据集中，存在的主要缺陷有以下：  
1. 缺陷形态不一导致漏检，如本身形态多样的现状不良。  
2. 缺陷未准确定义，如压印的形态多变，点状可以是，现状也可以是。  
3. 诡异的叠放情况。  
4. 自身形态的缺失，不可控的随机的缺失。  
5. 特征消失是缺陷，这种过杀是对ok的漏检。   

直接说明：  
多的部分（废料残留）可以直接标。  
卷边折角也可以直接标。   

特征缺失型缺陷的核心是结构完整性，即对比结构是否完整。  
形态异常型缺陷是可以直接标注的，因为它们是正品中根本不存在的形态，只要出现就高度可疑。   

# 完成一个项目  
## 前期应该做的工作  
- 模型训练框架  
需要确定能够正确运行，做一个模版训练框架压缩包出来，用于各个硬件环境一键移植（因为会用到多个服务器）。    
可以确定的是yolov5在中小型模型训练中，在工业检测场景下，使用同样的数据集，同样的训练参数，性能优于yolov8。

- 数据增强工程  
需要确定数据能够正确增强，这个是工具工程，重点在正确使用，**data_conversion_utils**里的数据格式转换，标签数量统计，数据增强工具。  

## 产出评估报告  
在光学给出评估报告后，算法需要产出评估报告。  
可以结合DFM（可以是ppt形式，可以是pdf格式，重要的是看里面的缺陷图），也可以不用DFM（那就会少一批缺陷图，也可能不缺，看光学怎么发检测图，DFM只是一个补充），来评估遇到的各个缺陷类型。  
- 评估重点是认清一个缺陷的特征，以及对它的检测方法（AI或者说需要传统介入），确定AI检的自己评估并给出三级标准（风险：Low Mid High），确定需要传统介入的，叫来传统算法工程师，问问他们的意见后，确定风险标准，以上所有确定Mid High风险需要给出对应风险的理由放在备注里。    

- 评估报告可能会有多个部门磋商，自己给出的意见需要有立足点。  

## 总览表格的制作  
- 放一个智能表格在项目进度表中（自己做一个overview模版放在企业微信的智能表格里）      

- 主要是我这里算法出表格框架，使用模型的划分来确定表格结构，各项指标沿用历史指标。    
框架划分完成，交给光学及其他部门填充对应内容。  
所以，**划分模型是基本功**，需要多练。  

- 划分模型，没什么技巧，合理就行，图片数量，检测类型，不多不少得放到一个模型里检测就可以。   

- 无法确定一个缺陷用什么方式来检出，就要查看光学报告，去找光学的工程师要。  



## Airports图片查看    
**主要看轻微缺陷**。大部分都是缺少轻微缺陷的图，存在漏检风险。  
只有反面压伤缺陷特征明显，比较容易检测。  
顶面大小边可以用传统来检测。  

PVD前后的图片以及缺陷成像不一样，缺陷类型有差别，需要分别判断。  

若将缺陷标注为无成像，可能是图像中没有可用的有效图像信息。   

若是缺陷与表面相似，那就是有过杀风险。  

总结下来就是，以成像效果、混淆可能性和特征显式表达为标准来划定检测风险。  

这指导了模型划分、训练以及后期模型迭代方向。  

## 确定工控机
使用划分的模型以及工位信息，来确定工控机的承载，即哪些模型放到主机，哪些模型放到副机，来得到主副机的配置情况。  

目前的点是图片量均衡，所分配的机器模型量均衡。  

## 模型训练部分  
发来图片数据之后，他们的原始数据存放结构对于标注组来说是不方便的，可以使用脚本给他们转一下，转成以模型划分文件夹存放的形式，再给标注组标注。  

使用工具进行数据增强，不要用训练工程里的**data_conversion_utils**，它是原始版本，没有项目适配化修改。  
要用外置的数据转换工具。  

### 模型训练模版工程说明：   
- 产生训练模型对应的训练py文件。  
- 修改预训练权重。  
- 修改数据对应的yaml文件（主要是里面的缺陷类型和缺陷数量以及训练测试文件路径）。  
- 修改数据对应的txt标签（主要是缺陷名称，跟数据增强部分的名称保持一致）。  

## Alpha Vision  
模型不能有中文路径。  
模型转换参数要与训练参数对应。（主要是imagesize）   
步骤是先选算子，（yolov5是分割1 1），再加载模型，在选入图片路径。（这样可以确保不出事）  

# 吉安·立讯  
在245上（全部）249上（F2）

现在标注的都在ABDF面。  

D面的胶偏位缺陷。  
- 对于多个面的处理需要有不同的处理方式吗？  
- 对于偏位的尺寸标准是什么？  
- 明确的传统+深度学习方法检测。  
- 深度学习：打标，数据均衡，模型训练。    

胶偏的突出特点是物体包装薄膜贴合错位，导致产品两侧有薄膜突出，以及对应的薄膜未覆盖区域。  
在生产报表中，膜偏位的过杀较多。  

可以找的点：  

- 如何防过杀。  

目前训练的模型参数：  
**imagesize:1088*1088**  
训练数据直接使用**复制**来增强数据量。  
划分数据的时候，给了划分测试集的选项，获得的图片比例是0.111:1，选择划分比例的时候是1:9。   



# 东莞·领益B25 Iphone pro卡针  

1. 看评估报告。（了解有哪些缺陷）  
2. 看数据。（仔细看缺陷特征）   

具有新增缺陷，是G面。  
- 以往数据要重新做，加入新标签。（历史数据不用管）  
- 训练数据在哪里？模型训练在哪里？（找不到训练数据）（.200）  
- 数据标注是只有G面要标吗？（对的）    
- 上传的数据在哪个地方？（不知道）（.200）  

### 缺陷分析  
#### 内侧鼓包  
就像是鼓包，弧状凸起。   
有一些细微的凸起也标，宁过杀，不漏检。  

#### 内侧压伤  
数据里有鼓包的数据。  
小凸点，小凹点是ok。  
大凹点，大凹陷是ng。   

#### 内侧划伤  
划伤就是划痕。  

图片要裁剪，训练用了rect。  

### 历史模分析  
侧面撕裂带与曲线反应相当，18,24模型检出效果差别不大。  
冲压痕的检出效果比较差，甚至24要差于18。  
脏污效果相近，24偶发性能优越与18。  
边缘缺口相差不大。  
**结论是使用24的预训练模型，但是冲压痕这部分数据试着增强一下，补充一下增强效果**。   

# Hinge  
在249上。  
一个问题：  
**后处理软件里面的那些前景背景值没显示出来**  
解决办法：更换AlphaVision（后处理软件）的四个文件（dll，lib，db啥，xxx）    


工作流：  
- 4-hinge（把标注数据搬到训练数据）  
- 5-hingeFindG（从训练数据中找到指定面的数据）  
- DATA_CONVERSION_UTILS_2（划分训练集，测试集）   
- data_conversion_utils（查看标签，做好记录）   
- data_conversion_utils（数据增强）  
- train（找到对应训练yaml，增加图片train和val）   
- train（修改train文件，batchsize，device，weight，开始训练）    

- 先转onnx，再转mdl    

B C E F 外  
G H I L 内  
I模型下管三个文件夹：I J K  
L模型下管两个文件夹：L M
  
轻微压伤检出能力弱：H G   
轻微内碰检出能力弱：H G 
轻微黑线检出能力弱：H G   
麻点检出能力极弱  ：G    

0828模型检出测试：  
B：碰伤压伤交叉检测了，小目标检出不够优秀。  
E：小目标压伤不够优秀。  
G：小目标麻点不够优秀。  
H：小目标压伤不够优秀。  

0828：  
BEGH的数据在表格里登记一下。  
把其他面的数据做出来，训一版。    
今天训A F I（F【1】，I【3】面有新加缺陷）    
(A F I直接开训，对齐到27号)

0829:  
训练A F I，中午发模型。  
把数据记录好，有新加缺陷。  

0829模型检出测试：  
A：小目标，下边缘轮廓不够优秀。  
I：轻微压伤不够优秀。  
I：大面积划伤不够优秀。  
I：ARR里细小压伤，细小划伤不够优秀。   

0829：  
B：反馈Pin突起6漏1，用B2面检出覆盖了（已解决）。  

0901：  
A模型改名称，E模型改名称   
C--,L--都还没训     
A只需修改标签。√    
E改了标签再训练一版 √    
E的所有文件重新移动了（在E-all里，截止到八月的最后一次数据）。  
移动新数据（3个部分）  

0902：  
C：更新弹片变形缺陷，数据极少，主打一个12张图训模型。  
漏检达标，过杀指标为70%，杀疯了我只能说。  
工作流更新，标注完成图片上传后，可以直接进入划分训练测试集。  
成像很接近，说明两个面的缺陷的特征相同，可以直接用一个名字覆盖它。  

今日确定一个事情：E模型改不改缺陷名称。  

日报格式：  
hinge更新昨日FAE反馈C模型弹片变形缺陷漏检。  
优化工作流，标注直接传按模型分类图片。  
配合hinge，B25 SIM的FAE排查后处理问题。  
训练MPM B1 C1模型。

0903：  
更新MPM模型。（y）  
hinge做数据。（x）  
hinge机台更新。（y）  
hinge表更新。（x）  
吉安更新。（x）  
吉安数据标注。（x）  
加缺陷，EFG（良擦伤，深擦伤）  

把图片文件复制的脚本写了。  

0904：  
更新hinge模型EFG。（y）  
hinge表更新。（）  
查看吉安立讯缺陷与模型对应情况，处理数据，训练模型。    

检出表：  

脏污A1[明显A1脏污检出不好] 脏污B[B的脏污很顶级] 脏污D[D的脏污一般般] 脏污F1[明显F1脏污检出不好] 脏污F2[明显F2脏污检出不好](主要看脏污)  

膜褶皱D[D的摸褶皱很顶级] 膜褶皱E[E没有检出膜褶皱]   

压伤A1[不错] A2[A2没有检出压伤-增加标签后很不错] A3[很不错] 压伤F1[很不错] F2[很不错]  

03号之前数据分布表：  
1脏污，2膜褶皱。  
A：1 137；2 0  
B：1 18； 2 0  
D：1 141；2 52  
E：1 0；  2 0  
F：1 64； 2 0  

训AD模型：D A2   
<训E F1>  

立讯训了A2 D

0905：  
训练B25的初版模型。   
只看到G面的训练脚本。  

查看立讯吉安的脏污、膜褶皱问题到底出在哪里。    
1. 把脏污，膜褶皱的数据拿出来。   
2. <训E[处理加膜褶皱] F1[处理脏污] F2[处理脏污]>    


hinge轻微缺陷过杀。  

hingeG面模型错检。  
1.把碰伤数据洗出来。  

B25训练G模型。   

立讯训了E  
B25训了G   




【资源重点倾斜项目】
1. 领益Mesh系列项目：由@李俊良(Junliang Li) 全面牵头，确保项目推进验收；其他人全面配合其工作@余志豪(Zhihao Yu)  @郑友康(Youkang Zheng)  ；

3. B747 Hinge：由@余志豪(Zhihao Yu) 牵头， @郑友康(Youkang Zheng)  全面配合其工作；

【其他项目】
 @郑友康(Youkang Zheng)   继续负责 立讯吉安的项目模型迭代；

# MPM  
在245上  
提取CUTIMAGE（改名成image）-裁图-放到标注任务-标完到245上训练。   

# 评估  
一个成像。  
一个噪点。  

# Git推送问题  
22端口被阻断的问题。    
ssh里改用443端口。  
具体操作如下：  
1. 在.ssh文件夹里新建一个config文件，里面填入：  
```
Host github.com  
  HostName ssh.github.com  
  Port 443  
  User git  
```  
2. 注意git的远程仓库链接要用ssh这个才会有效（正常推送即可）。   

---
---
---

现在是什么情况呢：  
MPM训完就没了。  
hinge要EF面新增缺陷。  
B25等传图回来。  
立讯吉安数据做好了，可以开始更新。  




0908：  
1. 评估做完。(完成)  
2. B25看缺陷情况。（要训CF面的模型）（完成）  
3. 立讯吉安看缺陷情况。(更D的膜褶皱，更A1的脏污，更D的异色)    
4. hinge看缺陷情况。（优化BEGH）（加了脏污缺陷）（已经移动数据到训练数据文件夹中B-all E G H）(完成)    

0909：  
1. 手机侧键套评审会。（完成）  
2. 搭建B25的训练框架，处理CF漏检。（完成）  
3. MPM新增支架压伤缺陷。（完成）  
4. hingeF面缺陷混检，进行标签合并。（完成）  

0910：  
1. 查看B25的C面为什么没有掩码。(B25的历史C模型不要用，有问题)   
2. 训立讯吉安a1的时候，不要用以前的增强数据了，用新的纯原始数据。(完成)   
3. iwatchplus评估报告。（完成）  
4. 东莞新美洋 手机侧件套评审会。（完成）   
5. 查看异物（D）和usb面盖间隙白胶（A1）在哪里。（完成）    

0911：  
1. 更新立讯吉安A1模型。（完成）  
2. 查看b25的c模型情况，自己测试训练的。（完成）    
3. 把立讯吉安D面的数据也整理一下。（完成）  
4. 开DFM评审会。（完成）  
5. b25有新漏检数据。（训练F模型）  
针尖变形：A，F  
脏污：E，G  
多料(披锋)：F   
针尖磨损：F  
缺料：F  
划伤：C  
麻点：F   
A1 C1 E1 F5 G1   
6. 处理b25后处理过杀。（完成）    
7. 评估手机侧键。(可明日看)      

0912：  
1. 发布B25更新，发布立讯吉安。（完成）    
2. 评估手机侧键。（已完成）       
3. 整理B25漏检数据。  
4. 训练立讯吉安A1，D模型。（完成）      
5. 训练合并的G模型。（完成）   

0915：  
1. 发布hingeB E G模型。（完成）  
2. 发布立讯吉安A1 D模型。（完成）  
3. 处理B25G面针尖卷边漏检数据。（完成）   
4. 处理立讯吉安feature的判断。  
先用c++代码，去找这四个点。   
5. 处理MPM的图。（完成）  

0916：  
1. 发布MPM的更新。（完成）  
2. 看传统方法定位。（待明日）  
直接上AI做。  
3. 处理hinge的F模型的偏差。（完成）  
4. MPM的训练模型。（完成）  
5. 排查hinge检出不稳定问题。(完成)    
由NG-》OK  
G1竖刀纹    
B1麻点  
F2的部分碰伤不成像    
F2ok缺陷成像整体偏浅  
G3面碰伤  
F1碰伤  
E发白缺陷直接消失  
F1竖刀纹偏浅    
H1划伤不成像   
G4碰伤不成像   
E1划伤  
G5毛边   
D弹片变形   
B的轻微压伤  
A1轮廓轻微缺陷  
6. 立讯吉安：  
usb异物，褶皱（处理中）    
亮印，划伤  

0917：  
1. 发布MPM更新，发布hinge更新。（完成）      
2. 处理hinge单一缺陷，处理刀纹漏检（训练G面模型）。  
3. 训练usb异物的A1模型。（完成）   
4. hingeG毛边漏检。  

0918：  
1. hinge的不稳定问题，B（碰伤） D（弹片变形） F（划伤）模型更新。（数据全部准备好了）    
2. 吉安立讯的项目。  
3. 立讯吉安的传统检出。  
4. B25漏检。  
5. hinge做数据。  
6. 立讯吉安按情况。  
hinge B C F
lxja D  

0919：  
1. 吉安立讯D面做好了。（完成）  
2. hinge的G毛边漏检。（完成）  

0920：  
1. MPM(完成)    
2. hinge（拿数据先）(E训了)     
3. b25（一张图搞鸡毛）    

0922：  
1. E2面新增异色缺陷。  
2. G3面新增反光G3缺陷。  
3. 立讯吉安，A2新增泛异色。  

0923：  
1. hinge中间压伤还是检不出。  
2. 立讯吉安的面盖压伤。  
3. B25的针尖变形。  

0926：  
1. 立讯吉安的压伤A2。(优先)     
2. 立讯吉安的usb白胶A2。(次之，最好可以一起)    
3. 立讯吉安的异色D8。(最后处理)    
4. hinge的只需要光学介入就可以了。  
5. B25的反一张图，没有办法给他优化。  
6. AlphaFeature继续看。  

0928：  
1. 立讯吉安的D面的异色检出一般。（完成）  
2. hinge的返图没有。（完成）  
3. b25的一点点图。（完成）  
4. AlphaFeature。   
5. 立讯吉安的A1的usb面盖间隙白胶已经做好了。  
6. 写评估报告。   

0929：  
1. 立讯的脏污，要清洗数据。（完成）    
2. 立讯的脏污缺陷要把其他的修改完成的图片加进去。  
3. hinge的没动静。  
4. B25的逆天了。  

0930：
1. 更新立讯的A1 D，查看脏污是个什么情况。  
2. 更新中石的A1 A2 A3。（完成）  
3. 白胶，异色，膜内毛丝。  

1008：  
1. 更新立讯的模型。  
2. 立讯的目前《膜内毛丝，脏污，异色，亮印》都很超标。    
3. 立讯的主要集中在A&D模型上。   
4. 少数的脏污缺陷放到了A1去检，A2没有检这个。   
5. 看C++。  
6. MPM多焊点，支架压伤漏检。  
7. 领益B25卡针的F面的多料模型漏检，G面的压伤模型漏检。  
8. part的表格做好。  

1009：  
1. hinge的漏检部分就是没检出来，直接加标就好了。  
2. 吉安的老哥没上班。  
3. B25不用管了。  
4. 把part的东西都准备好。
（光学报告和DFM都在，在线表也做好了）  
5. 看AlphaFeature。  
6. B25C面E面加标多料。    

今天要训练的模型：  
b25的C E F G  
hinge的B E F G（B E F是点检漏检）  
BEFG都已经准备好，只需要更改device号，解密后即可开训。    

1010：  
1. FC卡针C E模型的多料训出来，历史数据加进去。  
2. 卡针的F模型数据做一下增补，再训。  
3. G先不管了。     
4. hinge的刀纹，黑线，异色刷一下。  
5. 训练B E G（G已完成），B要加imagesize  

1011：  
1. B25的F的披风拆一下，数据做增强。  
2. B25的披风历史数据里有白披风，但是没有处理，也不能检出。   
3. 在G里面，把边缘压伤，部分划伤变成边缘缺口非常合理。  
4. C,E统统做增强后训练。  

1014：  
1. 立讯吉安的A1模型的脏污，全部筛出来看看啥情况。  
2. hinge的三张漏检，先存着。   
3. 立讯的脏污漏检因为小的轻微缺陷特性，区域较小，前后景灰度差值较小，这部分后处理没有捕捉到NG，另一部分模型漏检，叫泛脏污。  
4. 重新训置信的上升，但是这些面积什么的硬指标应该不会变太多。  

1015：  
1. hinge的等调后处理，我这里也训一下漏检。  
2. 立讯吉安还有其他缺陷没有处理。   
3. 评估报告搞出来。    

1016：  
1. hinge还原的历史模型，处理数据，重训（BEFG都有加点检的内容）。  
2. lxja查看漏检。  
3. b25查看历史数据，训漏检项目。  
4. 一个点就是说，有漏检，就把漏检项相同特征的图捞出来加强。    
5. 一个点就是，不要更改训练策略，使用yaml复制的就不要在图片里复制。    

- hinge的B可以接着用，它只增加了一个黑线。  
- hinge的E退到10-10。   
- hinge的F退到10-10。  
- hinge的G退到10-10。  
先找工程，更改yaml和预训练模型。  
重新做数据，EF没有新加数据，G的数据重做一下就可以。    
G的数据做好了。  
>>> EFG已全部整理完备，等待今日漏检数据到后重训。  

hinge的竖刀纹过杀要处理。   
立讯吉安的膜褶皱过杀，面盖脏污过杀要处理。    
膜褶皱的数据全部做好，面盖脏污的数据全部做好。  

hinge的竖刀纹过杀数据放好了F。（完成）    
立讯吉安的面盖脏污过杀放好了A1。（完成）   
立讯吉安的膜褶皱过杀放好了D。（完成）   
B25的漏检要处理，hinge，立讯的漏检要处理。    

还剩下的任务：  
立讯吉安 A1过杀判断为什么算不准，先看数据。     
立讯脏污漏检，以及其他的各种漏检。     
hinge添加缺陷表格。     
立讯吉安各种不稳定问题。  
有一个FACA要写。    

新的这个形态，到底是因为检不出来，还是因为缺少物料训练的满足能检到？这个要写在报告里。还有，这个缺陷是14号之前没有、14号之后新增的，还是一直都有？这些都得说明白，我好拿去和客户解释。

Issue description(问题描述):
1.新增缺陷形态导致漏检 
2.处理数据的时候有污染

Failure analysis(原因分析):
部分缺陷在检出面成像效果较差，而在未检出面成像较为清晰，导致部分缺陷被批量漏检。
新模型的检出重点发生了变化，偏向于对点检数据的处理，导致对历史数据的支持减弱，进而引发漏检问题。

Correction action(纠正措施)：
增补未检出面缺陷的标注，扩充训练数据集，回退至历史模型与数据，进行重新训练，确保新模型能够有效支持新的成像面及缺陷形态。  

20251017：  
新一个脏污过杀已完成标注，待处理训练模型（训练）。    
b25的表格。（完成）     
处理hinge的后处理。      

20251021：  
1. 发布MPM模型。（完成）  
2. 训练立讯的模型。（主要是几个漏检的，ongoing），等待中午面盖脏污返图，晚上训练A1 A2 D模型（数据准备已全部完成，只等开训）。      
3. hinge的更改裁图模型，训练E模型（不搞了，裁图还要裁坐标，很容易出问题，漏检已达标）。  
4. my。  
5. 裁图裁坐标好像可行，试一下。    

20251022：  
1. 发布立讯吉安模型（完成）。  
2. hinge的裁图坐标裁（还是看数据，不行就先放着）pass。   
3. 立讯吉安的C++代码。  
4. 立讯吉安的D面脏污过杀，看看原因。    

20251023：  
1. 立讯吉安  

20251028：  
1. 给张工一些图片（明日完成）。  
2. 立讯吉安回复模型优化时间（完成）。  
3. 整理表格（完成）。  
4. 训练模型。   
5. 裁图怎么弄（完成）。  
6. 确认工位缺失的图片在哪里。  

A C的这两天的没使用， 训练B CAD D E
还剩F G模型没出来。   
明天问问D的缺陷什么情况，还有一个变形的图捞出来看一下。


20251029：  
1. 大小边的图片给张工（完成）。  
2. 捞变形的图片看看。  
3. 裁图裁完给标注（完成）。   
4. 训练立讯的模型（完成）。    
5. 把初版模型搞出来（完成）。  
6. 这个变形的怎么弄，定一下。  
7. 评估报告。  

20251030：  
1. CAB，CAC要拆开啊（要看数据）。  
2. CAD的变形（要拿图）。  
3. FAA的没有检出。  
4. 立讯的其他面的缺陷训练。  
5. 评估报告。    

20251031：  
1. 评估报告。  
2. 张工传统开发，给图（完成）。  
3. 改机台配置（延迟）（完成）。  
4. 做下一步优化计划（完成）。   
5. F的加imagesize（完成）。  
6. 刀线100%过杀，侧边流痕检不出来（完成）。  

1. 传统那边，要商量结构线的检出，文字识别的做法（完成）。  
2. 立讯的模型训练。  
3. 所有的AAA反面溢镀全部重新做。  
4. GCA暂停训练，高光横刀纹重新做光学。  
5. 旋正为什么不沿用组件的机械方式，做这个字符识别是干什么的，我们这边做不了两张图片的联动，要跟软件串。   
6. 把A的重新训练了。   

20251101：  
1. 漏检项：法兰流纹，法兰压伤（看清形态了，建议加强hsv参数后训练）。  
2. 看立讯吉安的异色标注情况。   
3. 统计已完成。  

左键：   
侧孔毛刺加标。    
侧壁压伤加标。  
C法兰流纹过杀，固定位置标注。   
右键：    
法兰DDS。    
右键DDS的Mark点标注。   

右键底面顶面的图不用（改了成像）。   

20251102：  
NG已经全部改完。  

主副机共享
不张嘴，不思考。    
---
AAA模型：
反面压伤
反面溢镀
反面多料
Mark点

DAA模型：  
侧壁露白
侧壁压伤
侧壁凹坑

20251103：   
1. 评估报告。   
2. 替换算法库（完成）。  
3. 查看左键AAA模型溢镀的问题。  
4. 排查右键BAA模型过杀（完成，加对抗训练）。  
5. 反面压伤过杀问题，需要大量修改图片，贴图（完成）。   
6. 立讯的模型训练拉起来（完成）。  
7. 周末传图的图片数据也要更改。   

20251104：  
1. 立讯吉安模型更新（完成）。  
2. 左键A模型看情况（完成）。   
下午：  
3. 看看右键的B模型的训练（完成）。   
4. 写写评估报告（已完成算法图片导出）。  
5. 看看AAB的数据。  
6. 搞搞报销。   

20251105：  
1. AAA模型添加标签，白R角压伤。  
2. 流纹加标。CAA模型。  
3. 侧壁凹坑。（D E侧壁凹坑）  
4. 底面压伤标准更改。   
5. 毛刺模型需要加标（EAC EAD）。   

今天训的模型：  
EAA（解决侧孔毛刺），AAA（白R角，R角持续优化），CAA（流纹加标）。    


20251106：  
1. 侧孔毛刺的左键数据有问题。  
2. 流纹，R角，侧孔毛刺。   
3. 白R角过杀。  
4. 立讯吉安的脏污以后再训。  
5. G的结构线。   